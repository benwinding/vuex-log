!function(o,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.vuexTrace=t():o.vuexTrace=t()}(window,(function(){return function(o){var t={};function n(e){if(t[e])return t[e].exports;var r=t[e]={i:e,l:!1,exports:{}};return o[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=o,n.c=t,n.d=function(o,t,e){n.o(o,t)||Object.defineProperty(o,t,{enumerable:!0,get:e})},n.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},n.t=function(o,t){if(1&t&&(o=n(o)),8&t)return o;if(4&t&&"object"==typeof o&&o&&o.__esModule)return o;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:o}),2&t&&"string"!=typeof o)for(var r in o)n.d(e,r,function(t){return o[t]}.bind(null,r));return e},n.n=function(o){var t=o&&o.__esModule?function(){return o.default}:function(){return o};return n.d(t,"a",t),t},n.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)},n.p="/dist/",n(n.s=0)}([function(o,t,n){"use strict";n.r(t),n.d(t,"actionLogger",(function(){return f})),n.d(t,"mutationLogger",(function(){return d}));var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function r(){return!!window.matchMedia&&!!window.matchMedia("(prefers-color-scheme: dark)").matches}function i(o,t){return o.filter(t)[0]}function u(o){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(null===o||"object"!==(void 0===o?"undefined":e(o)))return o;var n=i(t,(function(t){return t.original===o}));if(n)return n.copy;var r=Array.isArray(o)?[]:{};return t.push({original:o,copy:r}),Object.keys(o).forEach((function(n){r[n]=u(o[n],t)})),r}var c=function(){function o(o,t){for(var n=0;n<t.length;n++){var e=t[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}return function(t,n,e){return n&&o(t.prototype,n),e&&o(t,e),t}}();var a="color: #000; background: "+(r()?"#ddd":"#777")+";font-size:12pt;font-weight:normal;padding:2px 10px;border-radius:5px;",l=function(){function o(){!function(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}return c(o,[{key:"log",value:function(){for(var o=arguments.length,t=Array(o),n=0;n<o;n++)t[n]=arguments[n];var e,r,i=t||[],u=i.shift(),c=i.shift(),l=a;"string"==typeof u&&"string"==typeof c&&u.includes("%c")?(l+=c,(e=console).log.apply(e,[u,l].concat(t))):(r=console).log.apply(r,["%c%s",l,u,c].concat(i))}},{key:"groupCollapsed",value:function(){for(var o=arguments.length,t=Array(o),n=0;n<o;n++)t[n]=arguments[n];var e,r,i=t||[],u=i.shift(),c=i.shift(),l=a;"string"==typeof u&&"string"==typeof c&&u.includes("%c")?(l+=c,(e=console).groupCollapsed.apply(e,[u,l].concat(t))):(r=console).groupCollapsed.apply(r,["%c%s",l,u,c].concat(i))}},{key:"group",get:function(){return console.group.bind(console)}},{key:"groupEnd",get:function(){return console.groupEnd.bind(console)}}]),o}();function f(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.collapsed,n=void 0===t||t,e=o.filter,i=void 0===e?function(o,t,n){return!0}:e,c=o.transformer,a=void 0===c?function(o){return o}:c,f=o.logger,d=void 0===f?new l:f;return function(o){var t=u(o.state),e=r();o.subscribeAction((function(o,r){var c=o.type,l=o.payload;if(void 0!==d){var f=u(r);if(i(c,t,f)){var s=new Date,g=["%c"+("→ Action "+c+(" @ "+p(s.getHours(),2)+":"+p(s.getMinutes(),2)+":"+p(s.getSeconds(),2)+"."+p(s.getMilliseconds(),3))),"background: #aed581;"];try{n?d.groupCollapsed.apply(d,g):d.group.apply(d,g)}catch(o){var y;(y=console).log.apply(y,g)}var v="font-size:10pt; padding:1px 8px; background: "+(e?"#222":"#ddd")+";";d.log("%cpayload",v+"color: #333;",{payload:l}),d.log("%cstate",v+"color: #4CAF50;",{nextState:a(f)});try{d.groupEnd()}catch(o){d.log("—— log end ——")}}t=f}}))}}function p(o,t){return n="0",e=t-o.toString().length,new Array(e+1).join(n)+o;var n,e}function d(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.collapsed,n=void 0===t||t,e=o.filter,i=void 0===e?function(o,t,n){return!0}:e,c=o.transformer,a=void 0===c?function(o){return o}:c,f=o.mutationTransformer,p=void 0===f?function(o){return o}:f,d=o.logger,g=void 0===d?new l:d;return function(o){var t=u(o.state),e=r();o.subscribe((function(o,r){if(void 0!==g){var c=u(r);if(i(o,t,c)){var l=new Date,f=" @ "+s(l.getHours(),2)+":"+s(l.getMinutes(),2)+":"+s(l.getSeconds(),2)+"."+s(l.getMilliseconds(),3),d=p(o),y=["%c"+("↻ Mutation "+o.type+f),"background: #ffb74d;"];try{n?g.groupCollapsed.apply(g,y):g.group.apply(g,y)}catch(o){var v;(v=console).log.apply(v,y)}var b="font-size:10pt; padding:1px 8px; background: "+(e?"#222":"#ddd")+";";g.log("%cprev state",b+"color: #9E9E9E;",{prevState:a(t)}),g.log("%cmutation",b+"color: #03A9F4;",{formattedMutation:d}),g.log("%cnext state",b+"color: #4CAF50;",{nextState:a(c)});try{g.groupEnd()}catch(o){g.log("—— log end ——")}}t=c}}))}}function s(o,t){return n="0",e=t-o.toString().length,new Array(e+1).join(n)+o;var n,e}}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWV4VHJhY2Uvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL3Z1ZXhUcmFjZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly92dWV4VHJhY2UvLi9zcmMvdXRpbC9pbmRleC5qcyIsIndlYnBhY2s6Ly92dWV4VHJhY2UvLi9zcmMvdXRpbC9kZWZhdWx0LWNvbnNvbGUuanMiLCJ3ZWJwYWNrOi8vdnVleFRyYWNlLy4vc3JjL2FjdGlvbi1sb2dnZXIuanMiLCJ3ZWJwYWNrOi8vdnVleFRyYWNlLy4vc3JjL211dGF0aW9uLWxvZ2dlci5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ3aW5kb3ciLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiaXNEYXJrTW9kZSIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiZmluZCIsImxpc3QiLCJmIiwiZmlsdGVyIiwiZGVlcENvcHkiLCJvYmoiLCJjYWNoZSIsImhpdCIsIm9yaWdpbmFsIiwiY29weSIsIkFycmF5IiwiaXNBcnJheSIsInB1c2giLCJrZXlzIiwiZm9yRWFjaCIsImRlZmF1bHRTdHlsZSIsImRlZmF1bHRMb2dnZXIiLCJhcmdzIiwiYXJnc1NhZmUiLCJmaXJzdEFyZyIsInNoaWZ0Iiwic2Vjb25kQXJnIiwic3R5bGUiLCJpbmNsdWRlcyIsImNvbnNvbGUiLCJsb2ciLCJncm91cENvbGxhcHNlZCIsImdyb3VwIiwiZ3JvdXBFbmQiLCJjcmVhdGVMb2dnZXIiLCJjb2xsYXBzZWQiLCJhY3Rpb24iLCJzdGF0ZUJlZm9yZSIsInN0YXRlQWZ0ZXIiLCJ0cmFuc2Zvcm1lciIsInN0YXRlIiwibG9nZ2VyIiwiZGVmYXVsdENvbnNvbGUiLCJzdG9yZSIsInByZXZTdGF0ZSIsIklTX0RBUksiLCJzdWJzY3JpYmVBY3Rpb24iLCJ0eXBlIiwicGF5bG9hZCIsIm5leHRTdGF0ZSIsInRpbWUiLCJEYXRlIiwibWVzc2FnZUFyZ3MiLCJtZXNzYWdlIiwiZm9ybWF0dGVkVGltZSIsInBhZCIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImdldFNlY29uZHMiLCJnZXRNaWxsaXNlY29uZHMiLCJlIiwiZ3JvdXBCYXNlU3R5bGUiLCJudW0iLCJtYXhMZW5ndGgiLCJzdHIiLCJ0aW1lcyIsInRvU3RyaW5nIiwibGVuZ3RoIiwiam9pbiIsIm11dGF0aW9uIiwibXV0YXRpb25UcmFuc2Zvcm1lciIsIm11dCIsInN1YnNjcmliZSIsImZvcm1hdHRlZE11dGF0aW9uIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUEyQ0EsRUFBTUMsR0FDMUIsaUJBQVpDLFNBQTBDLGlCQUFYQyxPQUN4Q0EsT0FBT0QsUUFBVUQsSUFDUSxtQkFBWEcsUUFBeUJBLE9BQU9DLElBQzlDRCxPQUFPLEdBQUlILEdBQ2UsaUJBQVpDLFFBQ2RBLFFBQW1CLFVBQUlELElBRXZCRCxFQUFnQixVQUFJQyxJQVJ0QixDQVNHSyxRQUFRLFdBQ1gsTyxZQ1RFLElBQUlDLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVQLFFBR25DLElBQUlDLEVBQVNJLEVBQWlCRSxHQUFZLENBQ3pDQyxFQUFHRCxFQUNIRSxHQUFHLEVBQ0hULFFBQVMsSUFVVixPQU5BVSxFQUFRSCxHQUFVSSxLQUFL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QUFXSyxHQUFZLENBQzFDLElBQU1DLEVBQU8sSUFBSUMsS0FDWEcsRUFBZ0JBLE1BQU1DLEVBQUlMLEVBQUtNLFdBQVksR0FBM0MsSUFBaURELEVBQ3JETCxFQUFLTyxhQUNMLEdBRkksSUFHREYsRUFBSUwsRUFBS1EsYUFBYyxHQUh0QixJQUc0QkgsRUFBSUwsRUFBS1Msa0JBQW1CLEdBQ3hEYyxFQUFvQkgsRUFBb0JELEdBR3hDakIsRUFBYyxDQUFDLE1BRkxDLGNBQWNnQixFQUFTdEIsS0FBT08sR0FFVCx3QkFDckMsSUFDTW5CLEVBQ0ZNLEVBQU9WLGVBQVAsTUFBQVUsRUFBeUJXLEdBRXpCWCxFQUFPVCxNQUFQLE1BQUFTLEVBQWdCVyxHQUVsQixNQUFPUSxHQUFHLE9BQ1YsRUFBQS9CLFNBQVFDLElBQVIsUUFBZXNCLEdBR2pCLElBQ01TLEVBQWlCQSxpREFEUGhCLEVBQVUsT0FBUyxRQUM3QixJQUNOSixFQUFPWCxJQUFJLGVBQWdCK0IsRUFBaUIsa0JBQW1CLENBQzdEakIsVUFBV0wsRUFBWUssS0FFekJILEVBQU9YLElBQUksYUFBYytCLEVBQWlCLGtCQUFtQixDQUMzRFksa0JBQW1CQSxJQUVyQmhDLEVBQU9YLElBQUksZUFBZ0IrQixFQUFpQixrQkFBbUIsQ0FDN0RaLFVBQVdWLEVBQVlVLEtBR3pCLElBQ0VSLEVBQU9SLFdBQ1AsTUFBTzJCLEdBQ1BuQixFQUFPWCxJQUFJLGtCQUlmYyxFQUFZSyxPQVNsQixTQUFTTSxFQUFJTyxFQUFLQyxHQUNoQixPQUxjQyxFQUtBLElBTEtDLEVBS0FGLEVBQVlELEVBQUlJLFdBQVdDLE9BSnZDLElBQUlwRCxNQUFNa0QsRUFBUSxHQUFHRyxLQUFLSixHQUl1QkYsRUFMMUQsSUFBZ0JFLEVBQUtDIiwiZmlsZSI6ImluZGV4LWRldi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJ2dWV4VHJhY2VcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1widnVleFRyYWNlXCJdID0gZmFjdG9yeSgpO1xufSkod2luZG93LCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9kaXN0L1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgZnVuY3Rpb24gaXNEYXJrTW9kZSgpIHtcclxuICBjb25zdCBpc0RhcmtUaGVtZSA9ICEhd2luZG93Lm1hdGNoTWVkaWEgJiYgISF3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScpLm1hdGNoZXM7XHJcbiAgcmV0dXJuIGlzRGFya1RoZW1lO1xyXG59XHJcblxyXG4vLyBDcmVkaXRzOiBib3Jyb3dlZCBjb2RlIGZyb20gdnVlanMvdnVleFxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgZmlyc3QgaXRlbSB0aGF0IHBhc3MgdGhlIHRlc3RcclxuICogYnkgc2Vjb25kIGFyZ3VtZW50IGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBwYXJhbSB7QXJyYXl9IGxpc3RcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZlxyXG4gKiBAcmV0dXJuIHsqfVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGZpbmQgKGxpc3QsIGYpIHtcclxuICByZXR1cm4gbGlzdC5maWx0ZXIoZilbMF1cclxufVxyXG5cclxuLyoqXHJcbiAqIERlZXAgY29weSB0aGUgZ2l2ZW4gb2JqZWN0IGNvbnNpZGVyaW5nIGNpcmN1bGFyIHN0cnVjdHVyZS5cclxuICogVGhpcyBmdW5jdGlvbiBjYWNoZXMgYWxsIG5lc3RlZCBvYmplY3RzIGFuZCBpdHMgY29waWVzLlxyXG4gKiBJZiBpdCBkZXRlY3RzIGNpcmN1bGFyIHN0cnVjdHVyZSwgdXNlIGNhY2hlZCBjb3B5IHRvIGF2b2lkIGluZmluaXRlIGxvb3AuXHJcbiAqXHJcbiAqIEBwYXJhbSB7Kn0gb2JqXHJcbiAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gY2FjaGVcclxuICogQHJldHVybiB7Kn1cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWVwQ29weSAob2JqLCBjYWNoZSA9IFtdKSB7XHJcbiAgLy8ganVzdCByZXR1cm4gaWYgb2JqIGlzIGltbXV0YWJsZSB2YWx1ZVxyXG4gIGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcclxuICAgIHJldHVybiBvYmpcclxuICB9XHJcblxyXG4gIC8vIGlmIG9iaiBpcyBoaXQsIGl0IGlzIGluIGNpcmN1bGFyIHN0cnVjdHVyZVxyXG4gIGNvbnN0IGhpdCA9IGZpbmQoY2FjaGUsIGMgPT4gYy5vcmlnaW5hbCA9PT0gb2JqKVxyXG4gIGlmIChoaXQpIHtcclxuICAgIHJldHVybiBoaXQuY29weVxyXG4gIH1cclxuXHJcbiAgY29uc3QgY29weSA9IEFycmF5LmlzQXJyYXkob2JqKSA/IFtdIDoge31cclxuICAvLyBwdXQgdGhlIGNvcHkgaW50byBjYWNoZSBhdCBmaXJzdFxyXG4gIC8vIGJlY2F1c2Ugd2Ugd2FudCB0byByZWZlciBpdCBpbiByZWN1cnNpdmUgZGVlcENvcHlcclxuICBjYWNoZS5wdXNoKHtcclxuICAgIG9yaWdpbmFsOiBvYmosXHJcbiAgICBjb3B5XHJcbiAgfSlcclxuXHJcbiAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICBjb3B5W2tleV0gPSBkZWVwQ29weShvYmpba2V5XSwgY2FjaGUpXHJcbiAgfSlcclxuXHJcbiAgcmV0dXJuIGNvcHlcclxufVxyXG5cclxuLyoqXHJcbiAqIGZvckVhY2ggZm9yIG9iamVjdFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGZvckVhY2hWYWx1ZSAob2JqLCBmbikge1xyXG4gIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChrZXkgPT4gZm4ob2JqW2tleV0sIGtleSkpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCAob2JqKSB7XHJcbiAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0J1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNQcm9taXNlICh2YWwpIHtcclxuICByZXR1cm4gdmFsICYmIHR5cGVvZiB2YWwudGhlbiA9PT0gJ2Z1bmN0aW9uJ1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0IChjb25kaXRpb24sIG1zZykge1xyXG4gIGlmICghY29uZGl0aW9uKSB0aHJvdyBuZXcgRXJyb3IoYFt2dWV4XSAke21zZ31gKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFydGlhbCAoZm4sIGFyZykge1xyXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gZm4oYXJnKVxyXG4gIH1cclxufSIsImltcG9ydCB7IGlzRGFya01vZGUgfSBmcm9tIFwiLi9pbmRleFwiO1xyXG5cclxuY29uc3QgaXNEYXJrID0gaXNEYXJrTW9kZSgpO1xyXG5jb25zdCBkZWZhdWx0QmcgPSBpc0RhcmsgPyAnI2RkZCcgOiAnIzc3Nyc7XHJcbmNvbnN0IGRlZmF1bHRUZXh0ID0gJyMwMDAnO1xyXG5jb25zdCBkZWZhdWx0U3R5bGUgPSBgY29sb3I6ICR7ZGVmYXVsdFRleHR9OyBiYWNrZ3JvdW5kOiAke2RlZmF1bHRCZ307Zm9udC1zaXplOjEycHQ7Zm9udC13ZWlnaHQ6bm9ybWFsO3BhZGRpbmc6MnB4IDEwcHg7Ym9yZGVyLXJhZGl1czo1cHg7YDtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGRlZmF1bHRMb2dnZXIge1xyXG4gIGNvbnN0cnVjdG9yKCkge31cclxuXHJcbiAgLy8gZ2V0IGxvZygpIHtcclxuICAvLyAgIGNvbnN0IGJvdW5kTG9nRm4gPSBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUsIFwiJWMgJXNcIiwgZGVmYXVsdFN0eWxlKTtcclxuICAvLyAgIHJldHVybiBib3VuZExvZ0ZuO1xyXG4gIC8vIH1cclxuICBsb2coLi4uYXJncykge1xyXG4gICAgY29uc3QgYXJnc1NhZmUgPSBhcmdzIHx8IFtdO1xyXG4gICAgY29uc3QgZmlyc3RBcmcgPSBhcmdzU2FmZS5zaGlmdCgpO1xyXG4gICAgY29uc3Qgc2Vjb25kQXJnID0gYXJnc1NhZmUuc2hpZnQoKTtcclxuICAgIGxldCBzdHlsZSA9IGRlZmF1bHRTdHlsZTtcclxuICAgIGlmIChcclxuICAgICAgdHlwZW9mIGZpcnN0QXJnID09PSBcInN0cmluZ1wiICYmXHJcbiAgICAgIHR5cGVvZiBzZWNvbmRBcmcgPT09IFwic3RyaW5nXCIgJiZcclxuICAgICAgZmlyc3RBcmcuaW5jbHVkZXMoXCIlY1wiKVxyXG4gICAgKSB7XHJcbiAgICAgIHN0eWxlID0gc3R5bGUgKyBzZWNvbmRBcmc7XHJcbiAgICAgIGNvbnNvbGUubG9nKGZpcnN0QXJnLCBzdHlsZSwgLi4uYXJncyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIiVjJXNcIiwgc3R5bGUsIGZpcnN0QXJnLCBzZWNvbmRBcmcsIC4uLmFyZ3NTYWZlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdyb3VwQ29sbGFwc2VkKC4uLmFyZ3MpIHtcclxuICAgIGNvbnN0IGFyZ3NTYWZlID0gYXJncyB8fCBbXTtcclxuICAgIGNvbnN0IGZpcnN0QXJnID0gYXJnc1NhZmUuc2hpZnQoKTtcclxuICAgIGNvbnN0IHNlY29uZEFyZyA9IGFyZ3NTYWZlLnNoaWZ0KCk7XHJcbiAgICBsZXQgc3R5bGUgPSBkZWZhdWx0U3R5bGU7XHJcbiAgICBpZiAoXHJcbiAgICAgIHR5cGVvZiBmaXJzdEFyZyA9PT0gXCJzdHJpbmdcIiAmJlxyXG4gICAgICB0eXBlb2Ygc2Vjb25kQXJnID09PSBcInN0cmluZ1wiICYmXHJcbiAgICAgIGZpcnN0QXJnLmluY2x1ZGVzKFwiJWNcIilcclxuICAgICkge1xyXG4gICAgICBzdHlsZSA9IHN0eWxlICsgc2Vjb25kQXJnO1xyXG4gICAgICBjb25zb2xlLmdyb3VwQ29sbGFwc2VkKGZpcnN0QXJnLCBzdHlsZSwgLi4uYXJncyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmdyb3VwQ29sbGFwc2VkKFwiJWMlc1wiLCBzdHlsZSwgZmlyc3RBcmcsIHNlY29uZEFyZywgLi4uYXJnc1NhZmUpO1xyXG4gICAgfVxyXG4gIH1cclxuICBnZXQgZ3JvdXAoKSB7XHJcbiAgICBjb25zdCBib3VuZExvZ0ZuID0gY29uc29sZS5ncm91cC5iaW5kKGNvbnNvbGUpO1xyXG4gICAgcmV0dXJuIGJvdW5kTG9nRm47XHJcbiAgfVxyXG4gIGdldCBncm91cEVuZCgpIHtcclxuICAgIGNvbnN0IGJvdW5kTG9nRm4gPSBjb25zb2xlLmdyb3VwRW5kLmJpbmQoY29uc29sZSk7XHJcbiAgICByZXR1cm4gYm91bmRMb2dGbjtcclxuICB9XHJcbn1cclxuIiwiLy8gQ3JlZGl0czogYm9ycm93ZWQgY29kZSBmcm9tIHZ1ZWpzL3Z1ZXhcclxuXHJcbmltcG9ydCB7IGRlZXBDb3B5LCBpc0RhcmtNb2RlIH0gZnJvbSBcIi4vdXRpbFwiO1xyXG5pbXBvcnQgZGVmYXVsdENvbnNvbGUgZnJvbSBcIi4vdXRpbC9kZWZhdWx0LWNvbnNvbGVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZUxvZ2dlcih7XHJcbiAgY29sbGFwc2VkID0gdHJ1ZSxcclxuICBmaWx0ZXIgPSAoYWN0aW9uLCBzdGF0ZUJlZm9yZSwgc3RhdGVBZnRlcikgPT4gdHJ1ZSxcclxuICB0cmFuc2Zvcm1lciA9IHN0YXRlID0+IHN0YXRlLFxyXG4gIGxvZ2dlciA9IG5ldyBkZWZhdWx0Q29uc29sZSgpXHJcbn0gPSB7fSkge1xyXG4gIHJldHVybiBzdG9yZSA9PiB7XHJcbiAgICBsZXQgcHJldlN0YXRlID0gZGVlcENvcHkoc3RvcmUuc3RhdGUpO1xyXG5cclxuICAgIGNvbnN0IElTX0RBUksgPSBpc0RhcmtNb2RlKCk7XHJcblxyXG4gICAgc3RvcmUuc3Vic2NyaWJlQWN0aW9uKCh7IHR5cGUsIHBheWxvYWQgfSwgc3RhdGUpID0+IHtcclxuICAgICAgaWYgKHR5cGVvZiBsb2dnZXIgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgbmV4dFN0YXRlID0gZGVlcENvcHkoc3RhdGUpO1xyXG5cclxuICAgICAgaWYgKGZpbHRlcih0eXBlLCBwcmV2U3RhdGUsIG5leHRTdGF0ZSkpIHtcclxuICAgICAgICBjb25zdCB0aW1lID0gbmV3IERhdGUoKTtcclxuICAgICAgICBjb25zdCBmb3JtYXR0ZWRUaW1lID0gYCBAICR7cGFkKHRpbWUuZ2V0SG91cnMoKSwgMil9OiR7cGFkKFxyXG4gICAgICAgICAgdGltZS5nZXRNaW51dGVzKCksXHJcbiAgICAgICAgICAyXHJcbiAgICAgICAgKX06JHtwYWQodGltZS5nZXRTZWNvbmRzKCksIDIpfS4ke3BhZCh0aW1lLmdldE1pbGxpc2Vjb25kcygpLCAzKX1gO1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBg4oaSIEFjdGlvbiAke3R5cGV9JHtmb3JtYXR0ZWRUaW1lfWA7XHJcblxyXG4gICAgICAgIC8vIHJlbmRlclxyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VBcmdzID0gW2AlYyR7bWVzc2FnZX1gLCBcImJhY2tncm91bmQ6ICNhZWQ1ODE7XCJdO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBpZiAoY29sbGFwc2VkKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5ncm91cENvbGxhcHNlZCguLi5tZXNzYWdlQXJncyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsb2dnZXIuZ3JvdXAoLi4ubWVzc2FnZUFyZ3MpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKC4uLm1lc3NhZ2VBcmdzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJnQ29sb3IgPSBJU19EQVJLID8gJyMyMjInIDogJyNkZGQnXHJcbiAgICAgICAgY29uc3QgZ3JvdXBCYXNlU3R5bGUgPSBgZm9udC1zaXplOjEwcHQ7IHBhZGRpbmc6MXB4IDhweDsgYmFja2dyb3VuZDogJHtiZ0NvbG9yfTtgO1xyXG4gICAgICAgIGxvZ2dlci5sb2coXCIlY3BheWxvYWRcIiwgZ3JvdXBCYXNlU3R5bGUgKyBcImNvbG9yOiAjMzMzO1wiLCB7XHJcbiAgICAgICAgICBwYXlsb2FkXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbG9nZ2VyLmxvZyhcIiVjc3RhdGVcIiwgZ3JvdXBCYXNlU3R5bGUgKyBcImNvbG9yOiAjNENBRjUwO1wiLCB7XHJcbiAgICAgICAgICBuZXh0U3RhdGU6IHRyYW5zZm9ybWVyKG5leHRTdGF0ZSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGxvZ2dlci5ncm91cEVuZCgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIGxvZ2dlci5sb2coXCLigJTigJQgbG9nIGVuZCDigJTigJRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBwcmV2U3RhdGUgPSBuZXh0U3RhdGU7XHJcbiAgICB9KTtcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXBlYXQoc3RyLCB0aW1lcykge1xyXG4gIHJldHVybiBuZXcgQXJyYXkodGltZXMgKyAxKS5qb2luKHN0cik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhZChudW0sIG1heExlbmd0aCkge1xyXG4gIHJldHVybiByZXBlYXQoXCIwXCIsIG1heExlbmd0aCAtIG51bS50b1N0cmluZygpLmxlbmd0aCkgKyBudW07XHJcbn1cclxuIiwiLy8gQ3JlZGl0czogYm9ycm93ZWQgY29kZSBmcm9tIHZ1ZWpzL3Z1ZXhcclxuXHJcbmltcG9ydCB7IGRlZXBDb3B5LCBpc0RhcmtNb2RlIH0gZnJvbSBcIi4vdXRpbFwiO1xyXG5pbXBvcnQgZGVmYXVsdENvbnNvbGUgZnJvbSBcIi4vdXRpbC9kZWZhdWx0LWNvbnNvbGVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZUxvZ2dlcih7XHJcbiAgY29sbGFwc2VkID0gdHJ1ZSxcclxuICBmaWx0ZXIgPSAobXV0YXRpb24sIHN0YXRlQmVmb3JlLCBzdGF0ZUFmdGVyKSA9PiB0cnVlLFxyXG4gIHRyYW5zZm9ybWVyID0gc3RhdGUgPT4gc3RhdGUsXHJcbiAgbXV0YXRpb25UcmFuc2Zvcm1lciA9IG11dCA9PiBtdXQsXHJcbiAgbG9nZ2VyID0gbmV3IGRlZmF1bHRDb25zb2xlKClcclxufSA9IHt9KSB7XHJcbiAgcmV0dXJuIHN0b3JlID0+IHtcclxuICAgIGxldCBwcmV2U3RhdGUgPSBkZWVwQ29weShzdG9yZS5zdGF0ZSk7XHJcblxyXG4gICAgY29uc3QgSVNfREFSSyA9IGlzRGFya01vZGUoKTtcclxuXHJcbiAgICBzdG9yZS5zdWJzY3JpYmUoKG11dGF0aW9uLCBzdGF0ZSkgPT4ge1xyXG4gICAgICBpZiAodHlwZW9mIGxvZ2dlciA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBuZXh0U3RhdGUgPSBkZWVwQ29weShzdGF0ZSk7XHJcblxyXG4gICAgICBpZiAoZmlsdGVyKG11dGF0aW9uLCBwcmV2U3RhdGUsIG5leHRTdGF0ZSkpIHtcclxuICAgICAgICBjb25zdCB0aW1lID0gbmV3IERhdGUoKTtcclxuICAgICAgICBjb25zdCBmb3JtYXR0ZWRUaW1lID0gYCBAICR7cGFkKHRpbWUuZ2V0SG91cnMoKSwgMil9OiR7cGFkKFxyXG4gICAgICAgICAgdGltZS5nZXRNaW51dGVzKCksXHJcbiAgICAgICAgICAyXHJcbiAgICAgICAgKX06JHtwYWQodGltZS5nZXRTZWNvbmRzKCksIDIpfS4ke3BhZCh0aW1lLmdldE1pbGxpc2Vjb25kcygpLCAzKX1gO1xyXG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZE11dGF0aW9uID0gbXV0YXRpb25UcmFuc2Zvcm1lcihtdXRhdGlvbik7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGDihrsgTXV0YXRpb24gJHttdXRhdGlvbi50eXBlfSR7Zm9ybWF0dGVkVGltZX1gO1xyXG4gICAgICAgIC8vIHJlbmRlclxyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VBcmdzID0gW2AlYyR7bWVzc2FnZX1gLCBcImJhY2tncm91bmQ6ICNmZmI3NGQ7XCJdO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBpZiAoY29sbGFwc2VkKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5ncm91cENvbGxhcHNlZCguLi5tZXNzYWdlQXJncyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsb2dnZXIuZ3JvdXAoLi4ubWVzc2FnZUFyZ3MpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKC4uLm1lc3NhZ2VBcmdzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJnQ29sb3IgPSBJU19EQVJLID8gJyMyMjInIDogJyNkZGQnXHJcbiAgICAgICAgY29uc3QgZ3JvdXBCYXNlU3R5bGUgPSBgZm9udC1zaXplOjEwcHQ7IHBhZGRpbmc6MXB4IDhweDsgYmFja2dyb3VuZDogJHtiZ0NvbG9yfTtgO1xyXG4gICAgICAgIGxvZ2dlci5sb2coXCIlY3ByZXYgc3RhdGVcIiwgZ3JvdXBCYXNlU3R5bGUgKyBcImNvbG9yOiAjOUU5RTlFO1wiLCB7XHJcbiAgICAgICAgICBwcmV2U3RhdGU6IHRyYW5zZm9ybWVyKHByZXZTdGF0ZSlcclxuICAgICAgICB9KTtcclxuICAgICAgICBsb2dnZXIubG9nKFwiJWNtdXRhdGlvblwiLCBncm91cEJhc2VTdHlsZSArIFwiY29sb3I6ICMwM0E5RjQ7XCIsIHtcclxuICAgICAgICAgIGZvcm1hdHRlZE11dGF0aW9uOiBmb3JtYXR0ZWRNdXRhdGlvblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxvZ2dlci5sb2coXCIlY25leHQgc3RhdGVcIiwgZ3JvdXBCYXNlU3R5bGUgKyBcImNvbG9yOiAjNENBRjUwO1wiLCB7XHJcbiAgICAgICAgICBuZXh0U3RhdGU6IHRyYW5zZm9ybWVyKG5leHRTdGF0ZSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGxvZ2dlci5ncm91cEVuZCgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIGxvZ2dlci5sb2coXCLigJTigJQgbG9nIGVuZCDigJTigJRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBwcmV2U3RhdGUgPSBuZXh0U3RhdGU7XHJcbiAgICB9KTtcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXBlYXQoc3RyLCB0aW1lcykge1xyXG4gIHJldHVybiBuZXcgQXJyYXkodGltZXMgKyAxKS5qb2luKHN0cik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhZChudW0sIG1heExlbmd0aCkge1xyXG4gIHJldHVybiByZXBlYXQoXCIwXCIsIG1heExlbmd0aCAtIG51bS50b1N0cmluZygpLmxlbmd0aCkgKyBudW07XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==